{"version":3,"sources":["pages/newuser/newuser.js"],"names":["app","getApp","useUrl","require","Page","data","title","photos","name","userHeight","compny","likesSports","likesMovies","likesBooks","genderCur","genderChoose","flag","value","ico","marryCur","marryChoose","ageIndex","two","industryIndex","houseArr","houseIndex","show","industryShow","confirmUpdate","upDateMyInfo","savePhone","that","wxrequest","url","updateUserMobile","session_key","wx","getStorageSync","mobile","phone","cancelConfirm","navigateBack","delta","error","text","showToast","image","duration","mask","length","parseInt","setData","setStorageSync","upobj","updateUserInfo","sex","ganqing","age","ageArr","user_height","job","industryOne","industryTwo","cart_house","likes_sports","likes_movies","likes_books","success","upPhotoInfo","photoObj","updatePhotos","JSON","stringify","res","console","log","inputValue","e","chooseIndustry","noMask","bindChange","tempValue","detail","delMask","bindPickerChange","type","currentTarget","dataset","upPhoto","obj","count","showLoading","tempFilePaths","i","upImg","uploadPhotos","filePath","formData","file","hideLoading","jsonObj","parse","res_file","push","photo_url","is_ta","slice","fail","wxUpload","err","chooseImage","preview","index","s","forEach","v","current","urls","previewImage","delphoto","splice","chooseChange","onLoad","nickName","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"newuser.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\nconst useUrl = require('../../utils/service')\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    title: 'newuser',\n    photos: [],\n    name: '',\n    userHeight: '',\n    compny: '',\n    likesSports: '',\n    likesMovies: '',\n    likesBooks: '',\n    // 性别\n    genderCur: 0,\n    genderChoose: [\n      {\n        flag: 1,\n        value: '男',\n        ico: 'icon-nanxing'\n      },\n      {\n        name: 2,\n        value: '女',\n        ico: 'icon-nvxing'\n      }\n    ],\n    // 婚姻\n    marryCur: 0,\n    marryChoose: [\n      {\n        flag: 1,\n        value: '单身',\n        ico: 'icon-nanxing'\n      },\n      {\n        name: 2,\n        value: '非单身',\n        ico: 'icon-nvxing'\n      }\n    ],\n    // 年龄\n    ageIndex: 0,\n    // 行业\n    two: 0,\n    industryIndex: 0,\n    value: [0, 0],\n    // 车房状况\n    houseArr: ['请选择您的车房状况', '有车有房', '有车无房', '有房无车', '车房待购'],\n    houseIndex: 0,\n    show: false,\n    industryShow: false\n  },\n  // 确认更新\n  confirmUpdate () {\n    // this.setData({\n    //   show: true\n    // })\n    this.upDateMyInfo()\n  },\n  savePhone () {\n    let that = this\n    app.wxrequest({\n      url: useUrl.updateUserMobile,\n      data: {\n        session_key: wx.getStorageSync('session_key'),\n        mobile: that.data.phone\n      }\n    })\n  },\n  // 取消更新\n  cancelConfirm () {\n    wx.navigateBack({\n      delta: 2\n    })\n  },\n  // 首先获取自己的资料\n  // getMyInfo () {\n  //   let getobj = {\n  //     url: useUrl.getUserInfoBySelf,\n  //     data: {\n  //       session_key: wx.getStorageSync('session_key')\n  //     },\n  //     success (res) {\n  //       console.log(res)\n  //     }\n  //   }\n  //   app.wxrequest(getobj)\n  // },\n  // 返回错误信息\n  error (text) {\n    wx.showToast({\n      title: text,\n      image: '../../images/jiong.png',\n      duration: 1500,\n      mask: true\n    })\n  },\n  // 更新用户资料\n  upDateMyInfo () {\n    let that = this\n    if (that.data.name.length <= 0) {\n      return that.error('请填写名字')\n    } else if (that.data.ageIndex === 0) {\n      return that.error('请选择年龄')\n    } else if (!that.data.phone || parseInt(that.data.phone.length) !== 11) {\n      return that.error('手机号有误')\n    } else if (that.data.userHeight.length <= 0) {\n      return that.error('请输入身高')\n    } else if ((that.data.value[0] * 1 === 0) && (that.data.value[1] * 1 === 0)) {\n      return that.error('请选择所在行业')\n    } else if (that.data.compny.length <= 0) {\n      return that.error('请填写公司名字')\n    } else if (that.data.houseIndex * 1 === 0) {\n      return that.error('请选择车房状况')\n    } else if (that.data.likesSports.length <= 0) {\n      return that.error('至少填写一项运动')\n    } else if (that.data.likesMovies.length <= 0) {\n      return that.error('至少填写一个电影')\n    } else if (that.data.likesBooks.length <= 0) {\n      return that.error('至少填写一本书')\n    } else if (!that.data.phone && that.data.phone.length * 1 !== 11) {\n      return that.error('请填写手机号码')\n    }\n    this.setData({\n      show: true\n    })\n    wx.setStorageSync('phoneNumber', that.data.phone)\n    that.savePhone()\n    let upobj = {\n      url: useUrl.updateUserInfo,\n      data: {\n        session_key: wx.getStorageSync('session_key'),\n        name: that.data.name,\n        sex: that.data.genderCur * 1 + 1,\n        ganqing: that.data.marryCur,\n        age: that.data.ageArr[that.data.ageIndex],\n        user_height: that.data.userHeight || '',\n        // job: that.data.industryOne[that.data.value[0]] + (that.data.value[1] < 24 ? '-' + that.data.industryTwo[that.data.value[0]][that.data.value[1]] : ''),\n        job: that.data.industryOne[that.data.value[0]] + '-' + that.data.industryTwo[that.data.value[0]][that.data.value[1]],\n        compny: that.data.compny || '',\n        cart_house: that.data.houseIndex,\n        likes_sports: that.data.likesSports || '',\n        likes_movies: that.data.likesMovies || '',\n        likes_books: that.data.likesBooks || ''\n      },\n      success () {\n        // console.log('保存信息成功', res)\n        // wx.showToast({\n        //   title: '个人资料保存成功'\n        // })\n        // setTimeout(function () {\n        //   wx.navigateBack({\n        //     delta: 1\n        //   })\n        // }, 1000)\n      }\n    }\n    app.wxrequest(upobj)\n    this.upPhotoInfo()\n  },\n  // 更新相册列表\n  upPhotoInfo () {\n    let that = this\n    let photoObj = {\n      url: useUrl.updatePhotos,\n      data: {\n        session_key: wx.getStorageSync('session_key'),\n        photos: JSON.stringify(that.data.photos)\n      },\n      success (res) {\n        console.log(res)\n      }\n    }\n    app.wxrequest(photoObj)\n  },\n  // 输入框内容\n  inputValue (e) {\n    let that = this\n    app.inputValue(e, that)\n  },\n  // 行业遮罩\n  chooseIndustry () {\n    this.setData({\n      industryShow: true\n    })\n  },\n  // 去除遮罩\n  noMask () {\n    this.setData({\n      industryShow: false\n    })\n  },\n  // 行业选择\n  bindChange (e) {\n    var tempValue = []\n    if (e.detail.value[0] === this.data.value[0]) {\n      tempValue = e.detail.value\n    } else {\n      tempValue = [e.detail.value[0], 0]\n    }\n    this.setData({\n      two: e.detail.value[0],\n      value: tempValue\n    })\n  },\n  // 去除遮罩层\n  delMask () {\n    this.setData({\n      show: false\n    })\n    wx.navigateBack({\n      delta: 1\n    })\n  },\n  // picker选择器\n  bindPickerChange: function (e) {\n    let type = e.currentTarget.dataset.type\n    let value = e.detail.value * 1\n    if (type === 'age') {\n      this.setData({\n        ageIndex: value\n      })\n    } else if (type === 'industry') {\n      this.setData({\n        industryIndex: value\n      })\n    } else if (type === 'house') {\n      this.setData({\n        houseIndex: value\n      })\n    }\n  },\n  // 用户上传图片\n  upPhoto () {\n    let that = this\n    let obj = {\n      count: 1,\n      success (res) {\n        wx.showLoading({\n          title: '图片上传中',\n          mask: true\n        })\n        let photos = that.data.photos\n        for (let i of res.tempFilePaths) {\n          // 添加到相册数组中\n          // photos.push(i)\n          // 上传图片\n          let upImg = {\n            url: useUrl.uploadPhotos,\n            filePath: i,\n            formData: {\n              session_key: wx.getStorageSync('session_key'),\n              file: i\n            },\n            success (res) {\n              // console.log(res)\n              // console.log('上传成功', res.data)\n              wx.hideLoading()\n              let jsonObj = JSON.parse(res.data).data.res_file\n              photos.push({\n                photo_url: jsonObj,\n                is_ta: 0\n              })\n              if (photos.length > 9) {\n                wx.showToast({\n                  title: '超过9张啦,已删除多余的照片',\n                  image: '../../images/jiong.png',\n                  duration: 2000,\n                  mask: true\n                })\n              }\n              photos = photos.slice(0, 9)\n              that.setData({\n                photos: photos\n              })\n              // console.log('obj', JSON.parse(res.data))\n            },\n            fail (res) {\n              console.log('上传错误', res)\n              wx.showToast({\n                title: '图片上传失败，请重新尝试',\n                mask: true,\n                duration: 1000\n              })\n            }\n          }\n          app.wxUpload(upImg)\n        }\n      },\n      fail (err) {\n        console.log(err)\n      }\n    }\n    wx.chooseImage(obj)\n  },\n  // 用户预览图片\n  preview (e) {\n    let that = this\n    let index = e.currentTarget.dataset.index\n    let s = []\n    that.data.photos.forEach(v => {\n      s.push(v.photo_url)\n    })\n    let obj = {\n      current: s[index],\n      urls: s\n    }\n    wx.previewImage(obj)\n  },\n  // 删除图片\n  delphoto (e) {\n    let that = this\n    let index = e.currentTarget.dataset.index\n    let photos = that.data.photos\n    photos.splice(index, 1)\n    that.setData({\n      photos: photos\n    })\n  },\n  // 单项选择\n  chooseChange (e) {\n    let type = e.currentTarget.dataset.type\n    let index = e.currentTarget.dataset.index\n    let that = this\n    if (type === 'gender') {\n      that.setData({\n        genderCur: index\n      })\n    } else if (type === 'marry') {\n      that.setData({\n        marryCur: index\n      })\n    }\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    // TODO: onLoad\n    app.data.ageArr.splice(0, 1, '请选择您的年龄区间')\n    app.data.industryOne.splice(0, 1, '请选择您所在的行业')\n    app.data.industryTwo.splice(0, 1, ['请选择您所在的行业'])\n    this.setData({\n      ageArr: app.data.ageArr,\n      industryOne: app.data.industryOne,\n      industryTwo: app.data.industryTwo,\n      name: wx.getStorageSync('userInfo').nickName || ''\n    })\n    // this.getMyInfo()\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}