{"version":3,"sources":["pages/newfollow/newfollow.js"],"names":["app","getApp","useUrl","require","Page","data","title","page","people","follow","e","that","index","currentTarget","dataset","peopleArr","type","Math","abs","fbj","url","doIgnore","session_key","wx","getStorageSync","id","success","res","console","log","code","showToast","mask","setData","wxrequest","getstranger","gsbj","getStranger","length","s","concat","onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh","onReachBottom"],"mappings":";;AAAA;AACA,IAAMA,MAAMC,QAAZ;AACA,IAAMC,SAASC,QAAQ,qBAAR,CAAf;AACA;AACAC,KAAK;AACH;;;AAGAC,QAAM;AACJC,WAAO,WADH;AAEJC,UAAM,CAFF;AAGJC,YAAQ;AAHJ,GAJH;AASH;AACAC,QAVG,kBAUKC,CAVL,EAUQ;AACT;AACA,QAAIC,OAAO,IAAX;AACA,QAAIC,QAAQF,EAAEG,aAAF,CAAgBC,OAAhB,CAAwBF,KAApC;AACA,QAAIG,YAAY,KAAKV,IAAL,CAAUG,MAA1B;AACA,QAAIQ,OAAOC,KAAKC,GAAL,CAASR,EAAEG,aAAF,CAAgBC,OAAhB,CAAwBE,IAAxB,GAA+B,CAA/B,GAAmC,CAA5C,CAAX;AACA,QAAIG,MAAM;AACRC,WAAKlB,OAAOmB,QADJ;AAERhB,YAAM;AACJiB,qBAAaC,GAAGC,cAAH,CAAkB,aAAlB,CADT;AAEJC,YAAIf,EAAEG,aAAF,CAAgBC,OAAhB,CAAwBW,EAFxB;AAGJT,cAAMA;AAHF,OAFE;AAORU,aAPQ,mBAOCC,GAPD,EAOM;AACZC,gBAAQC,GAAR,CAAYF,GAAZ;AACA,YAAIA,IAAItB,IAAJ,CAASyB,IAAT,KAAkB,GAAtB,EAA2B;AACzB,iBAAOP,GAAGQ,SAAH,CAAa;AAClBzB,mBAAO,mBADW;AAElB0B,kBAAM;AAFY,WAAb,CAAP;AAID;AACDjB,kBAAUH,KAAV,EAAiB,WAAjB,IAAgCI,IAAhC;AACAY,gBAAQC,GAAR,CAAY,YAAZ,EAA0Bd,SAA1B;AACAJ,aAAKsB,OAAL,CAAa;AACXzB,kBAAQO;AADG,SAAb;AAGD;AApBO,KAAV;AAsBAf,QAAIkC,SAAJ,CAAcf,GAAd;AACA;AACA;AACA;AACA;AACA;AACD,GA5CE;;AA6CH;AACAgB,aA9CG,uBA8CU5B,IA9CV,EA8CgB;AACjB,QAAII,OAAO,IAAX;AACA,QAAIyB,OAAO;AACThB,WAAKlB,OAAOmC,WADH;AAEThC,YAAM;AACJiB,qBAAaC,GAAGC,cAAH,CAAkB,aAAlB,CADT;AAEJjB,cAAMA;AAFF,OAFG;AAMTmB,aANS,mBAMAC,GANA,EAMK;AACZ,YAAI,CAACA,IAAItB,IAAJ,CAASA,IAAT,CAAciC,MAAf,KAA0B,CAA9B,EAAiC;AAC/B,iBAAOf,GAAGQ,SAAH,CAAa;AAClBzB,mBAAO,YADW;AAElB0B,kBAAM;AAFY,WAAb,CAAP;AAID;AACD,YAAIO,IAAI5B,KAAKN,IAAL,CAAUG,MAAV,CAAiBgC,MAAjB,CAAwBb,IAAItB,IAAJ,CAASA,IAAjC,CAAR;AACAM,aAAKsB,OAAL,CAAa;AACXzB,kBAAQ+B;AADG,SAAb;AAGD;AAjBQ,KAAX;AAmBAvC,QAAIkC,SAAJ,CAAcE,IAAd;AACD,GApEE;;AAqEH;;;AAGAK,QAxEG,oBAwEO;AACR;AACA,SAAKN,WAAL,CAAiB,CAAjB;AACD,GA3EE;;;AA6EH;;;AAGAO,SAhFG,qBAgFQ;AACT;AACD,GAlFE;;;AAoFH;;;AAGAC,QAvFG,oBAuFO;AACR;AACD,GAzFE;;;AA2FH;;;AAGAC,QA9FG,oBA8FO;AACR;AACD,GAhGE;;;AAkGH;;;AAGAC,UArGG,sBAqGS;AACV;AACD,GAvGE;;;AAyGH;;;AAGAC,mBA5GG,+BA4GkB;AACnB;AACD,GA9GE;AA+GHC,eA/GG,2BA+Gc;AACf,SAAKZ,WAAL,CAAiB,EAAE,KAAK9B,IAAL,CAAUE,IAA7B;AACD;AAjHE,CAAL","file":"newfollow.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\nconst useUrl = require('../../utils/service')\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    title: 'newfollow',\n    page: 1,\n    people: []\n  },\n  // 关注\n  follow (e) {\n    // let id = e.currentTarget.dataset.id\n    let that = this\n    let index = e.currentTarget.dataset.index\n    let peopleArr = this.data.people\n    let type = Math.abs(e.currentTarget.dataset.type * 1 - 1)\n    let fbj = {\n      url: useUrl.doIgnore,\n      data: {\n        session_key: wx.getStorageSync('session_key'),\n        id: e.currentTarget.dataset.id,\n        type: type\n      },\n      success (res) {\n        console.log(res)\n        if (res.data.code === 400) {\n          return wx.showToast({\n            title: '哎呀，服务器出小差了，请稍后重试~',\n            mask: true\n          })\n        }\n        peopleArr[index]['is_ignore'] = type\n        console.log('peopleInfo', peopleArr)\n        that.setData({\n          people: peopleArr\n        })\n      }\n    }\n    app.wxrequest(fbj)\n    // if (peopleArr[index]['is_ignore'] === 1) {\n    //   peopleArr[index]['is_ignore'] = 0\n    // } else {\n    //   peopleArr[index]['is_ignore'] = 1\n    // }\n  },\n  // 获取陌生人提醒列表\n  getstranger (page) {\n    let that = this\n    let gsbj = {\n      url: useUrl.getStranger,\n      data: {\n        session_key: wx.getStorageSync('session_key'),\n        page: page\n      },\n      success (res) {\n        if (!res.data.data.length === 0) {\n          return wx.showToast({\n            title: '亲，没有更多内容啦~',\n            mask: true\n          })\n        }\n        let s = that.data.people.concat(res.data.data)\n        that.setData({\n          people: s\n        })\n      }\n    }\n    app.wxrequest(gsbj)\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    // TODO: onLoad\n    this.getstranger(1)\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  },\n  onReachBottom () {\n    this.getstranger(++this.data.page)\n  }\n})\n"]}