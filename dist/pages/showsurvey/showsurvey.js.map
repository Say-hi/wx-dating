{"version":3,"sources":["pages/showsurvey/showsurvey.js"],"names":["app","getApp","useUrl","require","Page","data","title","userInfo","curChoose","show","write","hide","goUser","e","wx","navigateTo","url","currentTarget","dataset","id","delMask","that","setData","redirectTo","orderId","goback","navigateBack","delta","chooseArr","index","getQuestionDetail","queObj","questionnairesDetail","session_key","getStorageSync","success","res","code","s","questionnaires_info","question_one","question_two","question_three","question_four","type","user_info","job","split","wxrequest","onLoad","params","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"showsurvey.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\nconst useUrl = require('../../utils/service')\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    title: 'survey',\n    userInfo: {},\n    curChoose: 2,\n    show: false,\n    write: false,\n    hide: true\n  },\n  goUser (e) {\n    wx.navigateTo({\n      url: `../userInfo/userInfo?userId=${e.currentTarget.dataset.id}`\n    })\n  },\n  delMask () {\n    let that = this\n    this.setData({\n      show: false\n    })\n    wx.redirectTo({\n      // url: '../survey/survey?orderId=' + that.data.orderId\n      url: '../survey/survey?id=0' + '&write=true' + '&orderId=' + that.data.orderId + '&from=show'\n    })\n  },\n  goback () {\n    wx.navigateBack({\n      delta: 1\n    })\n  },\n  // 选择交换方式\n  chooseArr (e) {\n    this.setData({\n      curChoose: e.currentTarget.dataset.index\n    })\n  },\n  // 获取问卷详情\n  getQuestionDetail (id) {\n    let that = this\n    let queObj = {\n      url: useUrl.questionnairesDetail,\n      data: {\n        session_key: wx.getStorageSync('session_key'),\n        id: id\n      },\n      success (res) {\n        if (res.data.code === 401) {\n          return that.setData({\n            show: true\n          })\n        }\n        let s = res.data.data.questionnaires_info\n        that.setData({\n          question_one: s.question_one,\n          question_two: s.question_two,\n          question_three: s.question_three,\n          question_four: s.question_four,\n          type: s.type\n        })\n        if (!res.data.data.user_info) return\n        res.data.data.user_info.job = res.data.data.user_info.job.split('-')[1]\n        that.setData({\n          userInfo: res.data.data.user_info\n        })\n      }\n    }\n    app.wxrequest(queObj)\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (params) {\n    // let that = this\n    this.setData({\n      orderId: params.orderId,\n      id: params.id\n    })\n    this.getQuestionDetail(params.id)\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}