{"version":3,"sources":["pages/message/message.js"],"names":["app","getApp","useUrl","require","Page","data","title","page","message","getMessage","that","obj","url","messageList","session_key","wx","getStorageSync","success","res","length","showToast","forEach","v","content","br","setData","concat","wxrequest","str","split","onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh","onReachBottom"],"mappings":";;AAAA;AACA,IAAMA,MAAMC,QAAZ;AACA,IAAMC,SAASC,QAAQ,qBAAR,CAAf;AACA;AACAC,KAAK;AACH;;;AAGAC,QAAM;AACJC,WAAO,SADH;AAEJC,UAAM,CAFF;AAGJC,aAAS;AAHL,GAJH;AASHC,YATG,sBASSF,IATT,EASe;AAChB,QAAIG,OAAO,IAAX;AACA,QAAIC,MAAM;AACRC,WAAKV,OAAOW,WADJ;AAERR,YAAM;AACJS,qBAAaC,GAAGC,cAAH,CAAkB,aAAlB,CADT;AAEJT,cAAMA;AAFF,OAFE;AAMRU,aANQ,mBAMCC,GAND,EAMM;AACZ;AACA,YAAIA,IAAIb,IAAJ,CAASA,IAAT,CAAcc,MAAd,KAAyB,CAA7B,EAAgC;AAC9B,iBAAOJ,GAAGK,SAAH,CAAa;AAClBd,mBAAO;AADW,WAAb,CAAP;AAGD;AACDY,YAAIb,IAAJ,CAASA,IAAT,CAAcgB,OAAd,CAAsB,aAAK;AACzBC,YAAEC,OAAF,GAAYb,KAAKc,EAAL,CAAQF,EAAEC,OAAV,CAAZ;AACD,SAFD;AAGAb,aAAKe,OAAL,CAAa;AACXjB,mBAASE,KAAKL,IAAL,CAAUG,OAAV,CAAkBkB,MAAlB,CAAyBR,IAAIb,IAAJ,CAASA,IAAlC;AADE,SAAb;AAGD;AAnBO,KAAV;AAqBAL,QAAI2B,SAAJ,CAAchB,GAAd;AACD,GAjCE;AAkCHa,IAlCG,cAkCCI,GAlCD,EAkCM;AACP;AACA,WAAOA,IAAIC,KAAJ,CAAU,GAAV,CAAP;AACD,GArCE;;AAsCH;;;AAGAC,QAzCG,oBAyCO;AACR,SAAKrB,UAAL,CAAgB,CAAhB;AACA;AACD,GA5CE;;;AA8CH;;;AAGAsB,SAjDG,qBAiDQ;AACT;AACD,GAnDE;;;AAqDH;;;AAGAC,QAxDG,oBAwDO;AACR;AACD,GA1DE;;;AA4DH;;;AAGAC,QA/DG,oBA+DO;AACR;AACD,GAjEE;;;AAmEH;;;AAGAC,UAtEG,sBAsES;AACV;AACD,GAxEE;;;AA0EH;;;AAGAC,mBA7EG,+BA6EkB;AACnB;AACD,GA/EE;AAgFHC,eAhFG,2BAgFc;AACf,SAAK3B,UAAL,CAAgB,EAAE,KAAKJ,IAAL,CAAUE,IAA5B;AACD;AAlFE,CAAL","file":"message.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\nconst useUrl = require('../../utils/service')\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    title: 'message',\n    page: 1,\n    message: []\n  },\n  getMessage (page) {\n    let that = this\n    let obj = {\n      url: useUrl.messageList,\n      data: {\n        session_key: wx.getStorageSync('session_key'),\n        page: page\n      },\n      success (res) {\n        // console.log(res)\n        if (res.data.data.length === 0) {\n          return wx.showToast({\n            title: '没有更多内容啦'\n          })\n        }\n        res.data.data.forEach(v => {\n          v.content = that.br(v.content)\n        })\n        that.setData({\n          message: that.data.message.concat(res.data.data)\n        })\n      }\n    }\n    app.wxrequest(obj)\n  },\n  br (str) {\n    // console.log(str)\n    return str.split('$')\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    this.getMessage(1)\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  },\n  onReachBottom () {\n    this.getMessage(++this.data.page)\n  }\n})\n"]}