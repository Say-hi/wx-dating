{"version":3,"sources":["pages/setMeal/setMeal.js"],"names":["app","getApp","useUrl","require","WXParse","Page","data","imgUrls","indicatorDots","autoplay","circular","interval","duration","height","width","mode","yingyao","that","wx","navigateTo","url","id","orderInfo","name","showMap","openLocation","latitude","lat","longitude","lng","address","gohome","reLaunch","forOtherPeople","orderId","price","money","title","imgUrl","photo_list","setStorageSync","forMine","getMeal","obj","engagementDetail","session_key","getStorageSync","success","res","shopInfo","info","wxParse","menu","reminder","setData","wxrequest","onLoad","params","console","log","type","time","y","m","m_n","d","wxlogin","shopTime","onReady","onShow","onHide","onUnload","onPullDownRefresh","onShareAppMessage","path"],"mappings":"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","file":"setMeal.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\nconst useUrl = require('../../utils/service')\nconst WXParse = require('../../wxParse/wxParse')\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    // 轮播\n    imgUrls: [\n      // 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\n      // 'http://img06.tooopen.com/images/20160818/tooopen_sy_175866434296.jpg',\n      // 'http://img06.tooopen.com/images/20160818/tooopen_sy_175833047715.jpg'\n    ],\n    indicatorDots: true,\n    autoplay: true,\n    circular: true,\n    interval: 5000,\n    duration: 500,\n    height: '500rpx',\n    width: '750rpx',\n    mode: 'aspectFill'\n    // 中间区域\n    // title: 'Mr.Rocky双人火焰牛排餐',\n    // address: '广州·天河区',\n    // price: '168',\n    // 商店相关\n    // shopTitle: 'Mr.Rocky 洛奇先生餐吧',\n    // shopTime: '2017.05.20',\n    // shopAddress: '珠江新城华夏路6号'\n  },\n  // 应邀\n  yingyao () {\n    let that = this\n    wx.navigateTo({\n      url: '../duixianglist/duixianglist?id=' + that.data.id + '&title=' + that.data.orderInfo.name\n    })\n  },\n  // 查看地图\n  showMap () {\n    let that = this\n    wx.openLocation({\n      latitude: that.data.orderInfo.lat * 1,\n      longitude: that.data.orderInfo.lng * 1,\n      name: that.data.orderInfo.name,\n      address: that.data.orderInfo.address\n    })\n  },\n  gohome () {\n    wx.reLaunch({\n      url: '../index2/index2'\n    })\n  },\n  // 触摸开始\n  // touchStart (e) {\n  //   this.setData({\n  //     startY: e.changedTouches[0].clientY\n  //   })\n  // },\n  // // 触摸移动\n  // touchMove (e) {\n  //   let moveY = e.changedTouches[0].clientY\n  //   let height = parseInt(this.data.height)\n  //   let width = parseInt(this.data.width)\n  //   // console.log(moveY - parseInt(this.data.startY))\n  //   if ((moveY - parseInt(this.data.startY)) < 0) return\n  //   height += (moveY - parseInt(this.data.startY)) / 30\n  //   width += (moveY - parseInt(this.data.startY)) / 60\n  //   // console.log(height)\n  //   height = height + 'rpx'\n  //   width = width + 'rpx'\n  //   // console.log(height)\n  //   this.setData({\n  //     height: height,\n  //     width: width\n  //   })\n  // },\n  // // 触摸结束\n  // touchEnd () {\n  //   this.setData({\n  //     height: '500rpx',\n  //     width: '750rpx'\n  //   })\n  // },\n  // 替ta发起跳转\n  forOtherPeople () {\n    let that = this\n    let orderInfo = {\n      orderId: that.data.id,\n      address: that.data.orderInfo.address,\n      price: that.data.orderInfo.money,\n      title: that.data.orderInfo.name,\n      imgUrl: that.data.orderInfo.photo_list[0]\n    }\n    wx.setStorageSync('orderInfo', orderInfo)\n    wx.navigateTo({\n      url: '../taRecordDetail/taRecordDetail?type=forOther'\n    })\n  },\n  // 发起邀约\n  forMine () {\n    let that = this\n    wx.navigateTo({\n      url: '../order/order?id=' + that.data.id + '&address=' + that.data.orderInfo.address + '&price=' + that.data.orderInfo.money + '&title=' + that.data.orderInfo.name\n    })\n  },\n  // 获取套餐详情\n  getMeal (id) {\n    let that = this\n    let obj = {\n      url: useUrl.engagementDetail,\n      data: {\n        session_key: wx.getStorageSync('session_key'),\n        id: id\n      },\n      success (res) {\n        // console.log(res)\n        let shopInfo = res.data.data.info\n        WXParse.wxParse('shopInfo', 'html', shopInfo, that, 5)\n        let menu = res.data.data.menu\n        WXParse.wxParse('menu', 'html', menu, that, 5)\n        let reminder = res.data.data.reminder\n        WXParse.wxParse('reminder', 'html', reminder, that, 5)\n        that.setData({\n          id: id,\n          orderInfo: res.data.data\n        })\n      }\n    }\n    app.wxrequest(obj)\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (params) {\n    console.log(params)\n    this.setData({\n      id: params.id\n    })\n    if (params.type === 'share') {\n      let time = {\n        y: params.y,\n        m: params.m,\n        m_n: params.m_n,\n        d: params.d\n      }\n      wx.setStorageSync('time', time)\n      app.wxlogin(this.getMeal, params.id)\n      this.getMeal(params.id)\n    } else {\n      this.getMeal(params.id)\n    }\n    if (params.type === 'out') {\n      return this.setData({\n        type: 'out',\n        shopTime: params.time\n      })\n    }\n    let time = wx.getStorageSync('time')\n    time = time.y + '.' + (time.m_n < 10 ? '0' + time.m_n : time.m_n) + '.' + (time.d < 10 ? '0' + time.d : time.d)\n    this.setData({\n      shopTime: time\n    })\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  },\n  onShareAppMessage () {\n    let time = wx.getStorageSync('time')\n    console.log(time)\n    return {\n      title: '这儿有个值得分享的地方！',\n      path: `pages/setMeal/setMeal?id=${this.data.id}&d=${time.d}&m=${time.m}&m_n=${time.m_n}&y=${time.y}&type=share`\n    }\n  }\n})\n"]}