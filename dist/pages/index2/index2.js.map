{"version":3,"sources":["pages/index2/index2.js"],"names":["app","getApp","useUrl","require","ccFile","curDate","Date","calendarConverter","CalendarConverter","DAY_OF_MONTH","DAY_ENGLISH","MONTH_ENGLISH","getDayCount","year","month","isLeapYear","getOffset","Year","Month","offset","getDay","Page","data","title","userInfo","showText","vertical","indicatorDots","autoplay","interval","duration","i","show","friendshow","userList","goPlan","date","detailData","split","console","log","y","m","m_n","d","wx","setStorageSync","navigateTo","url","delfriend","setData","goPlans","e","currentTarget","dataset","id","scroll","swiperChange","current","detail","topDate","day","initCurDate","pageData","dateData","arrIsShow","arrDays","arrInfoEx","arrInfoExShow","curMonth","curYear","curDay","prevMonthDays","nextMonthDays","curMonthDays","curStatus","weekDay","week","offset2","dEx","solar2lunar","lunarFestival","lunarDay","lunarMonth","selectDay","type","that","currentMonth","dateArr","dayIndex","detailDate","sYear","sMonth","sDay","setTime","getfriend","page","time","obj","getSubscribeUserYaoyue","session_key","getStorageSync","success","res","code","length","push","showToast","wxrequest","onLoad","getFullYear","getMonth","getDate","wxlogin","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"index2.js","sourcesContent":["// 获取全局应用程序实例对象\n/*eslint-disable*/\nconst app = getApp()\nconst useUrl = require('../../utils/service')\n// const plugin = require('../../utils/plugin')\nconst ccFile = require('../../utils/calendar-converter')\n// const common = require('../../utils/common')\nlet curDate = new Date()\nlet calendarConverter = new ccFile.CalendarConverter()\n// let curYear = curDate.getFullYear()\n// console.log('curYear1', curYear)\n// let curMonth = curDate.getMonth()\n// console.log('curMonth1', curMonth)\n// let curDay = curDate.getDate()\n// console.log('curDay1', curDay)\n\n//月份天数表\nvar DAY_OF_MONTH = [\n  [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n  [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\n]\nvar DAY_ENGLISH = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']\nvar MONTH_ENGLISH = ['January', 'Febuary', 'March', 'April', 'May', 'June', 'July',  'August', 'September', 'October', 'November', 'December']\n//获取月份天数\nvar getDayCount = function(year, month){\n  return DAY_OF_MONTH[isLeapYear(year)][month];\n}\n//判断当前年是否闰年\nvar isLeapYear = function(year){\n  if (year % 400 == 0 || (year % 4 == 0 && year % 100 != 0))\n    return 1\n  else\n    return 0\n}\n//获取此月第一天相对视图显示的偏移\nvar getOffset = function(Year, Month) {\n  var offset = new Date(Year, Month, 1).getDay()\n  // console.log(offset)\n  offset = offset == 0 ? 6 : offset - 1//注意这个转换，Date对象的getDay函数返回返回值是 0（周日） 到 6（周六）\n  return offset\n}\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    title: '约会日',\n    userInfo: {},\n    showText: '今日约会',\n    vertical: true,\n    indicatorDots: false,\n    autoplay: false,\n    interval: 5000,\n    duration: 1000,\n    i: 0,\n    show: true,\n    friendshow: false,\n    userList: []\n  },\n  // 去到约会列表\n  goPlan () {\n    let date = this.data.detailData.date.split('年')\n    console.log(date)\n    let y = date[0]\n    let m = MONTH_ENGLISH[date[1].split('月')[0] - 1]\n    let m_n = date[1].split('月')[0]\n    // console.log(m)\n    let d = date[1].split('月')[1]\n    // console.log(d)\n    wx.setStorageSync('time', {y:y, m:m, m_n:m_n, d:d})\n    wx.navigateTo({\n      url: '../plans/plans'\n    })\n  },\n  delfriend () {\n    this.setData({\n      friendshow: false\n    })\n  },\n  goPlans (e) {\n    wx.navigateTo({\n      url: `../invitedConfirm/invitedConfirm?id=${e.currentTarget.dataset.id}&title=${e.currentTarget.dataset.title}`\n    })\n  },\n  // 滚动去除遮罩\n  scroll () {\n    if (!this.data.show) return\n    this.setData({\n      show: false\n    })\n  },\n  // swiper 切换月份\n  swiperChange (e) {\n    this.setData({\n      current: e.detail.current\n    })\n  },\n  // 设置顶部时间\n  topDate (year, month, day) {\n    return year + '年' + month + '月' + day\n  },\n  // 初始化当前月数据\n  initCurDate (year, month, day) {\n    let pageData = {\n      dateData: {\n        date: \"\",                //当前日期字符串\n        arrIsShow: [],           //是否当前月日期\n        // arrIsWeek: [],           //是否是周六日\n        arrDays: [],             //关于几号的信息\n        arrInfoEx: [],           //农历节假日等扩展信息\n        arrInfoExShow: [],       //处理后用于显示的扩展信息\n      }\n    }\n    var curMonth = month\n    var curYear = year\n    var curDay = day\n    var prevMonthDays = 0\n    var nextMonthDays = 0\n    var curMonthDays = 0\n    // 当月天数\n    curMonthDays = getDayCount(curYear, curMonth)\n    // 设置顶部日期\n    if (!this.data.curStatus) {\n      pageData.dateData.date = this.topDate(curYear, curMonth + 1, curDay)\n      pageData.dateData.curYear = curYear\n      pageData.dateData.curMonth = curMonth + 1\n      pageData.dateData.curDay = curDay\n      var weekDay = new Date(curYear, curMonth, curDay).getDay()\n      weekDay = weekDay == 0 ? 6 : weekDay - 1\n      pageData.dateData.week = DAY_ENGLISH[weekDay]\n      pageData.dateData.month = MONTH_ENGLISH[curMonth]\n    }\n\n    // 获取当月偏移\n    var offset = getOffset(curYear, curMonth)\n    // console.log('当月偏移'+offset)\n\n    var offset2 = getDayCount(curYear, curMonth) + offset\n    // console.log('偏移量加天数'+offset2)\n\n    if (curMonth === 0) {\n      prevMonthDays = getDayCount(curYear - 1, 11)\n      nextMonthDays = getDayCount(curYear, curMonth + 1)\n    } else if (curMonth === 11) {\n      prevMonthDays = getDayCount(curYear, curMonth -1)\n      nextMonthDays = getDayCount(curYear + 1, 0)\n    } else {\n      prevMonthDays = getDayCount(curYear, curMonth -1)\n      nextMonthDays = getDayCount(curYear, curMonth + 1)\n    }\n    // 当前月\n    for (var i = 0; i < 42; ++i) {\n      pageData.dateData.arrIsShow[i] = i < offset || i >= offset2 ? false : true\n      // pageData.dateData.arrIsWeek[i] = (i + 1) % 7 == 0 || (i + 2) % 7 == 0 ? true : false\n      // pageData.dateData.arrIsWeek[i-1] = (i + 1) % 7 == 0 ? true : false\n      pageData.dateData.arrDays[i] = i - offset + 1\n      if (!pageData.dateData.arrIsShow[i]) {\n        if ( i < curMonthDays) {\n          // console.log(i)\n          pageData.dateData.arrDays[i] = i - offset + 1 + prevMonthDays\n        } else {\n          pageData.dateData.arrDays[i] = i - offset2 + 1\n        }\n      }\n\n      // 添加阴历相关数据\n      var d = new Date(year, month, i - offset + 1)\n      var dEx = calendarConverter.solar2lunar(d)\n      pageData.dateData.arrInfoEx[i] = dEx\n      if ('' != dEx.lunarFestival) {\n        pageData.dateData.arrInfoExShow[i] = dEx.lunarFestival\n      } else if ('初一' === dEx.lunarDay) {\n        pageData.dateData.arrInfoExShow[i] = dEx.lunarMonth + '月'\n      } else {\n        pageData.dateData.arrInfoExShow[i] = dEx.lunarDay\n      }\n    }\n    return pageData\n  },\n  // 选择日期\n  selectDay (e) {\n    let type = e.currentTarget.dataset.type\n    if (type === 'nochoose') return\n    let that = this\n    let i = e.currentTarget.dataset.i\n    let currentMonth = this.data.dateArr[i].dateData.arrInfoEx\n    let d = e.currentTarget.dataset.dayIndex\n\n    let detailDate = {\n      curYear: currentMonth[d].sYear,\n      curMonth: currentMonth[d].sMonth,\n      curDay:currentMonth[d].sDay,\n      date: that.data.detailData.date\n    }\n    this.setData({\n      friendshow: true,\n      detailData: detailDate\n    })\n    this.setTime()\n    this.setData({\n      userList: []\n    })\n    this.getfriend(1, currentMonth[d].sYear + '-' + (currentMonth[d].sMonth < 10 ?  \"0\" + currentMonth[d].sMonth : currentMonth[d].sMonth)  + '-' + (currentMonth[d].sDay < 10 ?  \"0\" + currentMonth[d].sDay : currentMonth[d].sDay))\n  },\n  //获取对应日期的好友发起的套餐\n  getfriend (page, time) {\n    let that = this\n    let obj = {\n      url: useUrl.getSubscribeUserYaoyue,\n      data: {\n        session_key: wx.getStorageSync('session_key'),\n        time: time,\n        page: page\n      },\n      success (res) {\n        if (res.data.code === 200) {\n          if (res.data.data.length > 0) {\n            that.data.userList.push(res.data.data)\n            that.getfriend(++page, time)\n          } else {\n            if (page === 1) {\n              // console.log('123')\n              return wx.navigateTo({\n                url: '../plans/plans'\n              })\n            }\n            that.setData({\n              userList: that.data.userList\n            })\n          }\n        } else {\n          wx.showToast({\n            title: '请在个人中心登陆后使用小程序'\n          })\n        }\n      }\n    }\n    app.wxrequest(obj)\n  },\n  // 缓存设置日期\n  setTime () {\n    let y = this.data.detailData.curYear\n    let m = MONTH_ENGLISH[this.data.detailData.curMonth - 1]\n    let m_n = this.data.detailData.curMonth\n    // console.log(m)\n    let d = this.data.detailData.curDay\n    // console.log(d)\n    wx.setStorageSync('time', {y:y, m:m, m_n:m_n, d:d})\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    let curYear = curDate.getFullYear()\n// console.log('curYear1', curYear)\n    let curMonth = curDate.getMonth()\n// console.log('curMonth1', curMonth)\n    let curDay = curDate.getDate()\n    // 设置当前日期和判断基准日期\n    let detailDate = {\n      curYear: curYear,\n      curMonth: curMonth === 11 ? 1 : curMonth + 1,\n      curDay: curDay\n    }\n    // console.log('cruDate', curDate)\n    // console.log('curYear2', curYear)\n    // console.log('curMonth2', curMonth)\n    // console.log('curDay2', curDay)\n    detailDate.date = this.topDate(curYear, (curMonth + 1), curDay)\n    this.setData({\n      detailData: detailDate\n    })\n    // 初始化本月和后三个月的数据\n    let dateArr =[]\n    for (let i = 0; i <= 2; i++) {\n      if( i !== 0 ) curDay = 1\n      dateArr.push(this.initCurDate(curYear, curMonth, curDay))\n      if (curMonth === 11) {\n        curMonth = 0\n        ++curYear\n      } else {\n        curMonth = curMonth + 1\n      }\n    }\n    this.setData({\n      dateArr: dateArr\n    })\n    // 用户登陆\n    app.wxlogin()\n    // app.upLogin()\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // console.log(' ---------- onReady ----------')\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    this.setTime()\n    // console.log(' ---------- onShow ----------')\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // console.log(' ---------- onHide ----------')\n  },\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // console.log(' ---------- onUnload ----------')\n  },\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // console.log(' ---------- onPullDownRefresh ----------')\n  }\n})\n"]}